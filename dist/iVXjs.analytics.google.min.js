!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.LIBRARY="iVXjs",this.DELIMETER=":"}return o(e,[{key:"convention",value:function(){return this.LIBRARY}},{key:"addNames",value:function(e){var t=this;Object.keys(e).forEach(function(n,r){t[n]=t.convention(e[n])})}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(4),l=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n={VALIDATED:"validated",NOT_VALID:"not-valid",ANALYTICS_SET:"analytics-set",ANALYTICS_FINISHED:"analytics-finished"};return e.addNames(n),e}return i(t,e),a(t,[{key:"convention",value:function(e){var n=this.DELIMETER;return""+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+n+e}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return ga?(new _(e,t),e):void console.error("No google analytics")}Object.defineProperty(t,"__esModule",{value:!0}),t.Google=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=r(l),f=n(5),p=r(f),v=n(7),y=r(v),d=n(9),h=r(d),b=n(10),g=r(b),_=(new s.default,new p.default,new y.default,t.Google=function(e){function t(e,n){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.TYPE_NAME="google-analytics",r}return a(t,e),c(t,[{key:"init",value:function(e){var t=this.iVXjs,n=this.settings;this.experienceData=e,this.assertModule=new h.default(t.log),this.log=t.log;var r=e.config,o=void 0===r?{}:r,i=o.metadata,a=void 0===i?{}:i,u=a.trackingId,c=a.trackers,l=void 0===c?[]:c,s=n.plugins,f=void 0===s?[]:s,p=n.name,v=void 0===p?"ivxjsTracker":p,y=n.trackers,d=this._getAllGoogleTrackers(l);if(n.trackingId=u||n.trackingId,n.name=v,n.trackingId&&(d=[{type:this.TYPE_NAME,trackingId:n.trackingId,id:v}]),y&&(d=y),d.length<=0)return void t.log.warn("The Google Analytics Module needs at least one Google Analytics Type tracker to work. Make sure you define one in the JSON's metadata's collection.");var b={trackers:d,_getTrackersToProcess:this._getTrackersToProcess};this.experienceData.experience.analytics?this.experienceData.experience.analytics=Object.assign(this.experienceData.experience.analytics,b):this.experienceData.experience.analytics=b,this.analytics=b,d.forEach(function(e){var t=e.id,n=e.trackingId;ga("create",{trackingId:n,name:t}),ga(t+".send","pageview")}),f.forEach(function(e,t){ga("require",e)}),this._setUpElementListeners()}},{key:"sendEvent",value:function(e){var t=(this.settings,this.log,this.analytics),n=void 0===t?{}:t,r=e.tracker,o=n.trackers,i=void 0===o?[]:o,a=n._getTrackersToProcess(i,r);delete e.tracker;var u=a.map(function(t){return new Promise(function(n,r){var o=Object.assign({},e),i=t.id;o.hitCallback=function(){n()},ga(i+".send",o)})});return Promise.all(u)}},{key:"sendAnalyticsEvent",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.iVXjs),n=void 0===t?{}:t,r=n.experience,o=void 0===r?{}:r,i=o.processor,a=void 0===i?{}:i,u=(e.tracker,e.rules),c=void 0===u?[]:u,l=e;Array.isArray(c)&&c.length>0&&a.processRules&&(l=a.processRules(c)),this._processAnalyticEvents(l)}},{key:"_processAnalyticEvents",value:function(e){if(e){var t=this.analytics,n=this.iVXjs,r=t.trackers,o=void 0===r?[]:r,i=e.event,a=e.eventLabel,u=void 0===a?i:a,c=e.eventCategory,l=void 0===c?"ivx":c,s=e.eventAction,f=void 0===s?"triggered-events":s,p=e.tracker,v=t._getTrackersToProcess(o,p);v.length<=0||v.forEach(function(e){var t=e.id,r=e.name,o=e.trackingId;if(!u)return void n.log.warn("Google Analytics Send Event Failed: Event failed to send to the Google Analytics Tracker, "+r+" (id: "+t+", trackingId "+o+'), because no event or event label was found. Make sure your "sendAnalyticsEvent" args collection has either an "eventLabel" or "event" property.');ga(t+".send",{hitType:"event",eventLabel:u,eventCategory:l,eventAction:f})})}}},{key:"setAnalyticsData",value:function(e){var t=(this.settings,this.log,this.analytics),n=void 0===t?{}:t,r=n.trackers,o=void 0===r?[]:r,i=e.tracker,a=e.key,u=e.value;n._getTrackersToProcess(o,i).forEach(function(e){var t=e.id;ga(t+".set",a,u)})}},{key:"gaElementTransformer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,n=void 0===t?{}:t,r=e.type,o=n.id,i=void 0===o?"":o,a=r;return i&&i.length&&i.length>0&&(a=i+":"+a),{event:a}}},{key:"gaElementEventListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.find(function(e){return"sendAnalyticsEvent"===e.eventName})){var n=this.gaElementTransformer(t);this.sendAnalyticsEvent(n,t)}}},{key:"gaPageViewEventListener",value:function(e){var t=this.analytics,n=void 0===t?{}:t,r=n.trackers,o=void 0===r?[]:r,i=n._getTrackersToProcess(o),a=e.url;i.forEach(function(e){var t=e.id;ga(t+".send",{hitType:"pageview",page:a})})}},{key:"_setUpElementListeners",value:function(){var e=this,t=(this.iVXjsBus,this.iVXjs),n=t.constants,r=void 0===n?{}:n,o=r.GLOBAL,i=void 0===o?{}:o,a=r.STATE,u=i.EVENTS,c=void 0===u?{}:u,l=a.EVENTS;c.ELEMENT_EVENT&&t.Bus.on(c.ELEMENT_EVENT,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.gaElementEventListener(t,n)}),t.Bus.on(l.CHANGE,function(t){e.gaPageViewEventListener(t)}),t.Bus.on("sendAnalyticsEvent",function(t){e.sendAnalyticsEvent(t)})}},{key:"_getTrackersToProcess",value:function(e,t){return t?e.filter(function(e){return e.id===t}):e}},{key:"_getAllGoogleTrackers",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return t.type===e.TYPE_NAME})}},{key:"experience",get:function(){var e=this.experienceData;return e.experience.sendEvent=this.sendEvent,e.experience.setAnalyticsData=this.setAnalyticsData,e}}]),t}(g.default));e.export=u,angular&&angular.module("ivx-js")&&angular.module("ivx-js").constant("iVXjs.analytics.google",u).constant("iVXjsAnalyticsGoogle",u)}).call(t,n(3)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.CONFIG="config",e}return i(t,e),a(t,[{key:"convention",value:function(){var e=this.DELIMETER,n=this.CONFIG;return""+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+e+n}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(6),l=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n={CHANGE:"change",SUCCESS:"success",ERROR:"error",GO:"go",NOT_FOUND:"not-found",GET_STATE:"get-state",REQUEST_STATE:"request-state"};return e.addNames(n),e}return i(t,e),a(t,[{key:"convention",value:function(e){var n=this.DELIMETER;return""+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+n+e}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.STATE="state",e}return i(t,e),a(t,[{key:"convention",value:function(){var e=this.DELIMETER,n=this.STATE;return""+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+e+n}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(8),l=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.GOOGLE="google";var n={SEND:"send"};return e.addNames(n),e}return i(t,e),a(t,[{key:"convention",value:function(e){var n=this.DELIMETER,r=this.GOOGLE;return""+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+n+r+n+e}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(c),s=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.ANALYTICS="analytics",e}return i(t,e),a(t,[{key:"convention",value:function(){var e=this.DELIMETER,n=this.ANALYTICS;return""+u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+e+n}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.log=t}return o(e,[{key:"assert",value:function(e,t,n){var r=this.log,o=r.show;if(!e){var i={message:t+" is invalid: "+n+"."};if(o)throw this.log.error(i,"ASSERT"),new Error(i.message)}return e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=new i.default,u=function e(t,n){r(this,e),this.settings=t,this.iVXjs=n;var o=this;n.Bus.once(a.ANALYTICS_SET,function(e){o.init(e);var t=o.experience;t.analytics=o,n.Bus.emit(a.ANALYTICS_FINISHED,t)})};t.default=u}]);