!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t,r){var n=r(12),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.Validation=function(){function e(){n(this,e),this.errors=[]}return i(e,[{key:"addErrors",value:function(e){var t=this;e.forEach(function(e){t.errors.push(e)})}},{key:"validationArray",get:function(){return[]}},{key:"valid",get:function(){var e=this;return this.validationArray.reduce(function(t,r){return r?("boolean"!=typeof r.valid||r.valid||e.errors.push(r),t&&r.valid):t},!0)}}]),e}()},function(e,t,r){function n(e,t){var r=o(e,t);return i(r)?r:void 0}var i=r(29),o=r(35);e.exports=n},function(e,t,r){function n(e){return null==e?void 0===e?s:u:c&&c in Object(e)?o(e):a(e)}var i=r(11),o=r(31),a=r(32),u="[object Null]",s="[object Undefined]",c=i?i.toStringTag:void 0;e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=t.TypeValidator=function(){function e(){n(this,e)}return o(e,[{key:"isObject",value:function(e){var t=void 0===e?"undefined":i(e);return null!=e&&("object"==t||"function"==t)}},{key:"isUndefined",value:function(e){return void 0===e||null===e}},{key:"isString",value:function(e){return"[object String]"===this.toString.call(e)}},{key:"isFunction",value:function(e){return e&&"[object Function]"===this.toString.call(e)}},{key:"isNumber",value:function(e){return!isNaN(e)}},{key:"isBoolean",value:function(e){return"boolean"==typeof e||"object"===(void 0===e?"undefined":i(e))&&"boolean"==typeof e.valueOf()}},{key:"isEmpty",value:function(e){var t=Object.prototype.hasOwnProperty,r=Array.isArray(e),n="string"==typeof e,i=r||n;if(i&&0===e.length)return!0;if(i&&e.length>0)return!1;if(!isNaN(e))return!1;if(void 0===e)return!0;if(null===e)return!0;for(var o in e)if(t.call(e,o))return!1;return!0}},{key:"toString",get:function(){return Object.prototype.toString}}]),e}(),u=new a;t.ObjectParsers=function(){function e(){n(this,e)}return o(e,[{key:"mapKeys",value:function(e,t){if(!e||e==={})return[];var r=Object.keys(e),n=r.reduce(function(t,r){var n=[r,e[r]];return t.push(n),t},[]),i=new Map(n),o=[];return i?(i.forEach(function(e,r){o.push(t(e,r))}),o):[]}},{key:"merge",value:function(e,t,r){var n=Object.keys(t),i=new Object(e);return n.forEach(function(e,n){r&&r.indexOf(e)>=0||(i[e]=t[e])}),i}},{key:"reduce",value:function(e,t,r){if(e&&e!=={}){var n=Object.keys(e),i=n.reduce(function(t,r){var n=[r,e[r]];return t.push(n),t},[]);return new Map(i).forEach(function(e,n){r=t(r,e,n)}),r}}},{key:"anyEmpty",value:function(e,t){var r={isEmpty:!1,errors:[]};return e.forEach(function(e,n){t.forEach(function(t){u.isEmpty(e[t])&&(r.isEmpty=!0,r.errors.push({key:t,index:n,value:e[t]}))})}),r}},{key:"has",value:function(e,t){return Array.isArray(t)?this.hasSameArray(e,t):"object"===(void 0===t?"undefined":i(t))?this.hasSameObject(e,t):e.indexOf(t)>=0}},{key:"hasSameObject",value:function(e,t){var r=!1;return e.forEach(function(e,n){if("object"===(void 0===e?"undefined":i(e))){Object.keys(e).forEach(function(n,i){r=e[n]===t[n]})}}),r}},{key:"hasSameArray",value:function(e,t){var r=!1;return e.forEach(function(e,n){Array.isArray(e)&&e.forEach(function(e,n){r=e===t[n]})}),r}},{key:"setValue",value:function(e,t,r){for(var n=t.split("."),i=e,o=0;o<n.length-1;o++){var a=n[o];a in i?i=i[a]:(i[a]={},i=i[a])}i[n[n.length-1]]=r}},{key:"getValueFromPath",value:function(e,t){var r=e.split("."),n=t,i={},o=void 0;return r.forEach(function(e,t){if(!u.isEmpty(e)){if(i=n[e],u.isEmpty(i))return void(o=i);o=i,n=i}}),o}},{key:"isUnique",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={isUnique:!0,errors:[]},n={},i=this;return t.forEach(function(t){n[t]=[],e.forEach(function(e,o){i.has(n[t],e[t])?(r.errors.push({key:t,index:o,value:e[t]}),r.isUnique=!1):n[t].push(e[t])})}),r}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Rules=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(23),a=function(e){return e&&e.__esModule?e:{default:e}}(o);t.Rules=function(){function e(t){n(this,e),this.config=t}return i(e,[{key:"stateIdEnums",get:function(){var e=this.config.states;return(void 0===e?[]:e).reduce(function(e,t,r){var n=t.id,i=t.embeddedViews,o=void 0===i?[]:i;return e=[].concat(e,[n]),(0,a.default)(o)||o.forEach(function(t){var r=t.states,i=r.map(function(e){return n+"."+e.stateId}),o=r.map(function(e){return"^."+e.stateId});e=[].concat(e,i,o,["^"])}),e},[])}},{key:"rulesRequired",get:function(){}},{key:"schema",get:function(){return{type:"object",name:"Rule Schema",properties:{stateId:{type:"string"},rules:{type:"array"},rule:{type:"object",properties:{key:{type:"string",minLength:1},is:{type:"string",enum:["lt","lte","gt","gte","equals","notEquals"]},value:{type:["string","number","boolean","object","array"]}},required:this.rulesRequired}}}}}]),e}()},function(e,t){function r(e){return null!=e&&"object"==typeof e}e.exports=r},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.HTMLObject=function(){function e(){n(this,e)}return i(e,[{key:"generalHTMLSchema",get:function(){return{type:"object",properties:{html:{type:"string"},classes:{type:"string"},templateUrl:{type:"string"}}}}},{key:"labelHTMLSchema",get:function(){}}]),e}()},function(e,t){function r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}var n=Object.prototype;e.exports=r},function(e,t,r){function n(e){if(!o(e))return!1;var t=i(e);return t==u||t==s||t==a||t==c}var i=r(3),o=r(13),a="[object AsyncFunction]",u="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=n},function(e,t,r){var n=r(0),i=n.Symbol;e.exports=i},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r(30))},function(e,t){function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=r},function(e,t){function r(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var n=Function.prototype,i=n.toString;e.exports=r},function(e,t){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}var n=9007199254740991;e.exports=r},function(e,t,r){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return s}Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaValidation=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=(r(17),r(22)),u=r(52),s=t.SchemaValidation=function(){function e(t){n(this,e),this.error={},this.data=t,this.hasValidationLibrary.valid?this.valid||(this.error={message:this.collectErrorMessages(),data:this.data,errors:this.errors}):this.error={message:this.hasValidationLibrary.error.message,data:this.data,errors:[this.hasValidationLibrary]}}return o(e,[{key:"createErrorMessage",value:function(e){switch(e.code){case 11:return function(e){return e.subErrors.reduce(function(e,t,r){return e+"\n                "+t.message+"<br>"},"<strong>The data violates ONE of the following requirements:</strong><br>")}(e);default:return e.message}}},{key:"createPath",value:function(e){var t=this.data.config,r=e.split("/"),n=t;return{pathString:r.reduce(function(e,t,r){if(t.length<=0)return e;if(e.length<=0)return n=n[t],""+t;if(!isNaN(t)){var i=parseInt(t);return n=n[i],e+"["+t+"]"}return n=n[t],e+"."+t},""),data:n}}},{key:"collectErrorMessages",value:function(){var e=this;return this.errors.reduce(function(t,r){return t+"\n        TYPE: "+e.getErrorCode(r.code)+"  PATH: "+r.path.pathString+" MESSAGE : "+r.message},"")}},{key:"getErrorCode",value:function(e){var t=Object.values(tv4.errorCodes),r=Object.keys(tv4.errorCodes),n="";return t.forEach(function(t,i){t===e&&(n=r[i])}),n}},{key:"valid",get:function(){return this.errors.length<=0}},{key:"errors",get:function(){var e=this.baseValidate,t=this.stateTypesValidation,r=(this.data,this.config,this),n=[];return e.errors.forEach(function(e,t){n.push(e)}),t.forEach(function(e,t){n.push(e)}),n.map(function(e,t){return{message:r.createErrorMessage(e),path:r.createPath(""+e.dataPath),type:r.getErrorCode(e.code)}})}},{key:"baseValidate",get:function(){var e=this.data.config;return new a.BaseStructure(e).validate()}},{key:"stateTypesValidation",get:function(){var e=this.data.config.states;return new u.StatesTypes(e).validate()}},{key:"hasValidationLibrary",get:function(){return{valid:"undefined"!=typeof tv4,error:{path:"init()",message:"Schema validation required the 'tv4' library (https://github.com/geraintluff/tv4)",type:"missing"}}}}]),e}();e.export=i,angular&&angular.module("ivx-js")&&angular.module("ivx-js").constant("iVXjs.validation.schema",i).constant("iVXjsValidationSchema",i)}).call(t,r(4)(e))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.iVXjsValidation=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),s=r(1),c=r(18),l=(r(19),r(20));new u.ObjectParsers,new u.TypeValidator,t.iVXjsValidation=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.data=e,r.valid||(r.error={message:r.collectErrorMessages(),data:r.data,errors:r.errors}),r}return o(t,e),a(t,[{key:"collectErrorMessages",value:function(){return this.errors.reverse().reduce(function(e,t){var r=t.error;return e+"\nTYPE: "+(r.type?r.type:"ERROR")+"  PATH: "+r.path+" "+(r.message&&r.message.length>0?"MESSAGE: "+r.message:"")},"")}},{key:"validationArray",get:function(){return[this.ruleValidationObj,this.experienceValidationObj,this.configValidationObj]}},{key:"configValidationObj",get:function(){var e=this.data.config,t=new l.ConfigValidation(e),r=t.valid,n=t.errors;return r||this.addErrors(n),{valid:r,error:{path:"config",message:"An experience must have a valid config",type:"invalid"}}}},{key:"experienceValidationObj",get:function(){var e=this.data.experience,t=new c.ExperienceValidation(e),r=t.valid,n=t.errors;return r||this.addErrors(n),{valid:r,error:{path:"experience",message:"An experience must not have any errors",type:"invalid"},data:e}}},{key:"ruleValidationObj",get:function(){var e=this.data.rules;return{valid:void 0!==e,error:{name:"Missing Rules:",message:"The function rules needs to be defined in the experience."},data:e}}}]),t}(s.Validation)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExperienceValidation=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1);t.ExperienceValidation=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.experience=e,r}return o(t,e),a(t,[{key:"validationArray",get:function(){return[this.validAnimateElementObj,this.validSetDataObj]}},{key:"validAnimateElementObj",get:function(){var e=this.experience.animateElement;return{valid:void 0!==e,error:{path:"experience.animateElement",type:"missing"},data:e}}},{key:"validSetDataObj",get:function(){var e=this.experience.setData;return{valid:void 0!==e,error:{path:"experience.setData",type:"missing"},data:e}}}]),t}(u.Validation)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleValidation=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),s=r(5);t.ModuleValidation=function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.experience=e,r.typeValidator=new s.TypeValidator,r}return o(t,e),a(t,[{key:"validationArray",get:function(){return[this.validUIModuleObj]}},{key:"validUIModuleObj",get:function(){var e=this.experience.ui;return{valid:void 0!==e&&this.typeValidator.isString(e)&&e.length>0,error:{path:"ui",type:"missing"},data:e}}}]),t}(u.Validation)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigValidation=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(1),s=r(21);t.ConfigValidation=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.config=e,r}return o(t,e),a(t,[{key:"validationArray",get:function(){return[this.hasStatesObj,this.hasDefaultStateObj,this.validDefaultStateObj,this.validStateConfig]}},{key:"validStateConfig",get:function(){var e=new s.ConfigStatesValidation(this.config.states),t=e.valid,r=e.errors;return t||this.addErrors(r),{valid:t,error:{type:"invalid",path:"config.states",message:"Experience requires that all states are valid"}}}},{key:"validDefaultStateObj",get:function(){if(this.hasDefaultStateObj.valid){var e=this.config.defaultState,t=e.length-1,r=e[t];return{valid:r.stateId&&r.stateId.length>=0,error:{type:"missing",path:"config.defaultState["+t+"].stateId"}}}}},{key:"hasDefaultStateObj",get:function(){var e=this.config.defaultState,t=void 0===e?[]:e;return{valid:void 0!==t&&t.length>=1,error:{type:"missing",path:"config.defaultState"},data:t}}},{key:"hasStatesObj",get:function(){var e=this.config.states;return{valid:void 0!==e&&e.length>=1,error:{type:"missing",path:"config.states"},data:e}}}]),t}(u.Validation)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigStatesValidation=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),s=r(1),c=new u.ObjectParsers;new u.TypeValidator,t.ConfigStatesValidation=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.states=e,r}return o(t,e),a(t,[{key:"convertToConfigErrorObjs",value:function(e,t){return e.map(function(e){var r=e.key,n=e.value,i=e.index,o={type:t,path:"config.states["+i+"]."+r};return"duplicate"===t&&(o.message="Duplicate value: "+n),{valid:!1,error:o}})}},{key:"validationArray",get:function(){return[this.uniqueValidStateData,this.filledValidStateData]}},{key:"filledValidStateData",get:function(){var e=c.anyEmpty(this.states,["id","url","type"]),t=e.errors,r=void 0===t?[]:t,n=e.isEmpty;return n&&this.addErrors(this.convertToConfigErrorObjs(r,"missing")),{valid:!n,error:{path:"config.states",message:"Not all state's have an id, url, and/or type",type:"invalid"},data:this.states}}},{key:"uniqueValidStateData",get:function(){var e=c.isUnique(this.states,["id","url"]),t=e.errors,r=void 0===t?[]:t,n=e.isUnique;return n||this.addErrors(this.convertToConfigErrorObjs(r,"duplicate")),{valid:n,error:{path:"config.states",message:"Not all state's ids and urls are unique",type:"invalid"},data:this.states}}}]),t}(s.Validation)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStructure=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(6),a=r(50);t.BaseStructure=function(){function e(t){n(this,e),this.config=t,this.rulesSchema=new o.Rules(t).schema,this.stateSchema=new a.States(t).schema}return i(e,[{key:"validate",value:function(){return tv4.validateMultiple(this.config,this.schema)}},{key:"schema",get:function(){return this.baseStructure}},{key:"baseStructure",get:function(){return{type:"object",properties:this.properties,required:this.requiredKeys}}},{key:"properties",get:function(){return{defaultState:{type:"array",items:this.rulesSchema},states:{type:"array",items:this.stateSchema,minItems:"1"}}}},{key:"requiredKeys",get:function(){return["defaultState","states"]}}]),e}()},function(e,t,r){function n(e){if(null==e)return!0;if(s(e)&&(u(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||p(e)||a(e)))return!e.length;var t=o(e);if(t==f||t==y)return!e.size;if(l(e))return!i(e).length;for(var r in e)if(h.call(e,r))return!1;return!0}var i=r(24),o=r(27),a=r(40),u=r(42),s=r(43),c=r(44),l=r(9),p=r(46),f="[object Map]",y="[object Set]",d=Object.prototype,h=d.hasOwnProperty;e.exports=n},function(e,t,r){function n(e){if(!i(e))return o(e);var t=[];for(var r in Object(e))u.call(e,r)&&"constructor"!=r&&t.push(r);return t}var i=r(9),o=r(25),a=Object.prototype,u=a.hasOwnProperty;e.exports=n},function(e,t,r){var n=r(26),i=n(Object.keys,Object);e.exports=i},function(e,t){function r(e,t){return function(r){return e(t(r))}}e.exports=r},function(e,t,r){var n=r(28),i=r(36),o=r(37),a=r(38),u=r(39),s=r(3),c=r(14),l=c(n),p=c(i),f=c(o),y=c(a),d=c(u),h=s;(n&&"[object DataView]"!=h(new n(new ArrayBuffer(1)))||i&&"[object Map]"!=h(new i)||o&&"[object Promise]"!=h(o.resolve())||a&&"[object Set]"!=h(new a)||u&&"[object WeakMap]"!=h(new u))&&(h=function(e){var t=s(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case l:return"[object DataView]";case p:return"[object Map]";case f:return"[object Promise]";case y:return"[object Set]";case d:return"[object WeakMap]"}return t}),e.exports=h},function(e,t,r){var n=r(2),i=r(0),o=n(i,"DataView");e.exports=o},function(e,t,r){function n(e){return!(!a(e)||o(e))&&(i(e)?d:c).test(u(e))}var i=r(10),o=r(33),a=r(13),u=r(14),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,p=Object.prototype,f=l.toString,y=p.hasOwnProperty,d=RegExp("^"+f.call(y).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){function n(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=u.call(e);return n&&(t?e[s]=r:delete e[s]),i}var i=r(11),o=Object.prototype,a=o.hasOwnProperty,u=o.toString,s=i?i.toStringTag:void 0;e.exports=n},function(e,t){function r(e){return i.call(e)}var n=Object.prototype,i=n.toString;e.exports=r},function(e,t,r){function n(e){return!!o&&o in e}var i=r(34),o=function(){var e=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=n},function(e,t,r){var n=r(0),i=n["__core-js_shared__"];e.exports=i},function(e,t){function r(e,t){return null==e?void 0:e[t]}e.exports=r},function(e,t,r){var n=r(2),i=r(0),o=n(i,"Map");e.exports=o},function(e,t,r){var n=r(2),i=r(0),o=n(i,"Promise");e.exports=o},function(e,t,r){var n=r(2),i=r(0),o=n(i,"Set");e.exports=o},function(e,t,r){var n=r(2),i=r(0),o=n(i,"WeakMap");e.exports=o},function(e,t,r){var n=r(41),i=r(7),o=Object.prototype,a=o.hasOwnProperty,u=o.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},function(e,t,r){function n(e){return o(e)&&i(e)==a}var i=r(3),o=r(7),a="[object Arguments]";e.exports=n},function(e,t){var r=Array.isArray;e.exports=r},function(e,t,r){function n(e){return null!=e&&o(e.length)&&!i(e)}var i=r(10),o=r(15);e.exports=n},function(e,t,r){(function(e){var n=r(0),i=r(45),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=a&&a.exports===o,s=u?n.Buffer:void 0,c=s?s.isBuffer:void 0,l=c||i;e.exports=l}).call(t,r(4)(e))},function(e,t){function r(){return!1}e.exports=r},function(e,t,r){var n=r(47),i=r(48),o=r(49),a=o&&o.isTypedArray,u=a?i(a):n;e.exports=u},function(e,t,r){function n(e){return a(e)&&o(e.length)&&!!u[i(e)]}var i=r(3),o=r(15),a=r(7),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=n},function(e,t){function r(e){return function(t){return e(t)}}e.exports=r},function(e,t,r){(function(e){var n=r(12),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i,u=a&&n.process,s=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=s}).call(t,r(4)(e))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.States=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(6),a=r(8),u=r(51),s=function(e){return e&&e.__esModule?e:{default:e}}(u);t.States=function(){function e(t){n(this,e),this.rulesSchema=new o.Rules(t).schema,this.generalHTMLSchema=(new a.HTMLObject).generalHTMLSchema,this.embeddedViewsSchema=new s.default(t).schema}return i(e,[{key:"stateRequired",get:function(){return["id","name","url","type"]}},{key:"typeEnum",get:function(){return["navigation","video","input","html"]}},{key:"stateProperties",get:function(){return{id:{type:"string",minLength:1},name:{type:"string",minLength:1},url:{type:"string",pattern:"/^(/[A-Za-z0-9-]*)$/",minLength:1},audio:{type:"object",properties:{src:{type:"string",minLength:1},loop:{type:"boolean"},cuePoints:{type:"array"}},required:["src"]},type:{type:"string",enum:this.typeEnum},next:{type:"array",items:this.rulesSchema},onEnter:{type:"array"},onExit:{type:"array"},embedded:{type:"boolean"},header:this.generalHTMLSchema,footer:this.generalHTMLSchema,embeddedViews:{type:"array",items:this.embeddedViewsSchema},oneOf:[{required:["embedded"]},{required:["embeddedViews"]}]}}},{key:"schema",get:function(){return{type:"object",name:"state",properties:this.stateProperties,required:this.stateRequired}}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(6),a=r(8),u=function(){function e(t){n(this,e),Object.assign(this,{generalHTMLSchema:(new a.HTMLObject).generalHTMLSchema,rulesSchema:new o.Rules(t).schema,config:t})}return i(e,[{key:"stateRequired",get:function(){return["id","name","appendTo","type"]}},{key:"types",get:function(){return["custom"]}},{key:"stateIdEnum",get:function(){return this.config.states.reduce(function(e,t){return t.embedded&&(e=[].concat(e,[t.id])),e},["^"])}},{key:"stateProperties",get:function(){return{id:{type:"string",minLength:1},name:{type:"string",minLength:1},type:{type:"string",enum:this.types},appendTo:{type:"string"},states:{type:"array",items:{type:"object",properties:{stateId:{type:"string",enum:this.stateIdEnum},next:{type:"array",items:this.rulesSchema}}}}}}},{key:"schema",get:function(){return{type:"object",name:"state",properties:this.stateProperties,required:this.stateRequired}}}]),e}();t.default=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.StatesTypes=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(53),a=r(54),u=r(55),s=r(57);t.StatesTypes=function(){function e(t){n(this,e),this.states=t}return i(e,[{key:"validate",value:function(){var e=this.states,t=this.typesSchemas;return e.reduce(function(e,r,n){var i=r.type;if(i&&t[i]){new t[i](r,n).validate().errors.forEach(function(t,r){var i=t;i.dataPath="states/"+n+(i.dataPath.length>0?i.dataPath:""),e.push(t)})}return e},[])}},{key:"typesSchemas",get:function(){return{html:o.HTMLStateSchema,video:a.VideoStateSchema,input:u.InputStateSchema,navigation:s.NavigationStateSchema}}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.HTMLStateSchema=function(){function e(t){n(this,e),this.state=t}return i(e,[{key:"validate",value:function(){return tv4.validateMultiple(this.state,this.schema)}},{key:"requiredProperties",get:function(){return["html"]}},{key:"schema",get:function(){return{type:"object",properties:{html:{type:"string"},templateUrl:{type:"string"},timeoutInMs:{type:"number"}},oneOf:[{required:["html"]},{required:["templateUrl"]}]}}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.VideoStateSchema=function(){function e(t){n(this,e),this.state=t}return i(e,[{key:"validate",value:function(){return tv4.validateMultiple(this.state,this.schema)}},{key:"schema",get:function(){return{type:"object",properties:{playerSettings:{type:"object",properties:{autoplay:{type:"boolean"},controls:{type:["boolean","string","object"],properties:{type:{type:["boolean","string"]},classes:{type:"string"},required:["type"]}},attributes:{type:"object"},src:{type:"string"},sources:{type:"array",items:[{type:"object",properties:{type:{type:"string",enum:["video/mp4","video/webm","video/ogg"]},src:{type:"string"}},required:["src","type"]}],minItems:"1"},tracks:{type:"array",items:[{type:"object",properties:{id:{type:"string"},src:{type:"string"},kind:{type:"string"},default:{type:"boolean"},cues:{type:"array",items:[{type:"object",properties:{id:{type:"string"},start:{type:"number"},end:{type:"number"},payload:{type:"string"},align:{type:"string"},position:{type:"string"},size:{type:"string"},vertical:{type:"string"}},required:["id","start","end","payload"]}]},required:["id","kind"]}}]}},oneOf:[{required:["src"]},{required:["sources"]},{required:["vimeoId"]},{required:["youtubeId"]}]},personalizations:{type:"array",items:{type:"object",properties:{id:{type:"string"},html:{type:"string"},templateUrl:{type:"string"}},required:["id"],oneOf:[{required:["html"]},{required:["templateUrl"]}]}},cuePoints:{type:"array",items:{type:"object",properties:{timeAt:{type:"number",minimum:0},endAt:{type:"number",minimum:0},eventName:{type:"string"},args:{type:"object"}},required:["eventName"]}}},required:["playerSettings"]}}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.InputStateSchema=void 0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(56),a=r(8);t.InputStateSchema=function(){function e(t,r){n(this,e),this.state=t,this.index=r,this.generalHTMLSchema=(new a.HTMLObject).generalHTMLSchema}return i(e,[{key:"validate",value:function(){return{errors:[tv4.validateMultiple(this.state,this.schema),this.inputErrors].reduce(function(e,t,r){return t.errors.forEach(function(t,r){e.push(t)}),e},[])}}},{key:"inputErrors",get:function(){var e=this.index,t=this.state.inputs,r=void 0===t?[]:t;return{errors:new o.InputErrors(r,e).validate()}}},{key:"schema",get:function(){return{type:"object",properties:{form:{type:"object",properties:{classes:{type:"string"},label:{type:"string"},labelHTML:{type:"string"},labelTemplateUrl:{type:"string"},submit:{type:"object",properties:{classes:{type:"string"},label:{type:"string"},labelHTML:{type:"string"},labelTemplateUrl:{type:"string"}}}}},onSubmit:{type:"array",items:{type:"object"}},inputs:{type:"array",minItems:1,items:{type:"object",properties:{id:{type:"string",minLength:1},name:{type:"string",minLength:1},type:{type:"string"},errors:{type:"object"},label:{type:"string"},labelHTML:{type:"string"},labelTemplateUrl:{type:"string"},beforeHtml:this.generalHTMLSchema,afterHtml:this.generalHTMLSchema,settings:{type:"object",properties:{input:{type:"object",properties:{classes:{type:"string"}}},container:{type:"object",properties:{classes:{type:"string"}}},width:{type:"string"}}},attributes:{type:"object",properties:{required:{type:"boolean"},placeholder:{type:"string"},minlength:{type:"number"},maxlength:{type:"number"}}},onChange:{type:"array",items:{type:"object"}}},required:["id","name","type"]}}},required:["inputs"]}}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.InputErrors=function(){function e(t,r){n(this,e),this.inputs=t,this.currentState=r}return i(e,[{key:"validate",value:function(){var e=this.inputs,t=this.inputSchemas;return e.reduce(function(e,r,n){var i=r.type;if(i&&t[i]){tv4.validateMultiple(r,t[i]).errors.forEach(function(t,r){t.dataPath="/inputs/"+n+(t.dataPath.length>0?t.dataPath:""),e.push(t)})}return e},[])}},{key:"inputSchemas",get:function(){return{buttons:this.buttonsSchema,checkbox:this.checkboxSchema,date:this.dateSchema,"datetime-local":this.datetimeLocalSchema,email:this.textSchema,number:this.numberSchema,options:this.optionsSchema,radio:this.radioSchema,text:this.textSchema,textarea:this.textSchema,url:this.textSchema}}},{key:"buttonsSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["buttons"]},settings:{type:"object",properties:{showLabel:{type:"boolean"}}},buttons:{type:"array",items:{type:"object",properties:{label:{type:"string"},labelHTML:{type:"string"},labelTemplateUrl:{type:"string"},classes:{type:"string"},onClick:{type:"array",items:{type:"object",properties:{eventName:{type:"string"}}}}},required:["value"]},minItems:1}}}}},{key:"checkboxSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["checkbox"]}}}}},{key:"dateSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["date"]},attributes:{type:"object",properties:{min:{type:"string",pattern:"/^[0-9]{2}/[0-9]{2}/[0-9]{4}$/"},max:{type:"string",pattern:"/^[0-9]{2}/[0-9]{2}/[0-9]{4}$/"}}}}}}},{key:"datetimeLocalSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["datetime-local"]},attributes:{type:"object",properties:{min:{type:"string",pattern:"/^[0-9]{2}/[0-9]{2}/[0-9]{4}$/"},max:{type:"string",pattern:"/^[0-9]{2}/[0-9]{2}/[0-9]{4}$/"}}}}}}},{key:"numberSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["number"]},attributes:{type:"object",properties:{placeholder:{type:"string"},min:{type:"number"},max:{type:"number"},step:{type:"number",minimum:0,exclusiveMinimum:!0}}}}}}},{key:"optionsSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["options"]},defaultDisplay:{type:"string"},options:{type:"array",minItems:2,items:{type:"object",properties:{value:{type:"string",minLength:1},display:{type:"string",minLength:1}},required:["value","display"]}}}}}},{key:"radioSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["radio"]},radioButtons:{type:"array",items:{type:"object",properties:{value:{type:"string",minLength:1},label:{type:"string",minLength:1},labelHTML:{type:"string",minLength:1},labelTemplateUrl:{type:"string",minLength:1},classes:{type:"string"}},required:["value"],oneOf:[{required:["label"]},{required:["labelHTML"]},{required:["labelTemplateUrl"]}]},minItems:2}}}}},{key:"textSchema",get:function(){return{type:"object",properties:{type:{type:"string",enum:["text","email","url","textarea"]}}}}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.NavigationStateSchema=function(){function e(t,r){n(this,e),this.state=t,this.index=r}return i(e,[{key:"validate",value:function(){return tv4.validateMultiple(this.state,this.schema)}},{key:"schema",get:function(){return{type:"object",properties:{links:{type:"array",minItems:1,items:{type:"object",properties:{href:{type:"string"},label:{type:"string"},labelHTML:{type:"string"},labelTemplateUrl:{type:"string"},attributes:{type:"object",properties:{target:{type:"string",enum:["_blank"]}}},onClick:{type:"array"}},oneOf:[{required:["href"]},{required:["route"]}]}}},required:["links"]}}}]),e}()}]);