

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Set Up a 404 State - iVXjs</title>







<meta property="og:locale" content="en">
<meta property="og:site_name" content="iVXjs">
<meta property="og:title" content="Set Up a 404 State">


  <link rel="canonical" href="http://localhost:4000/ivx-js/developer/tutorial.set-up-a-404-state/">
  <meta property="og:url" content="http://localhost:4000/ivx-js/developer/tutorial.set-up-a-404-state/">







  

  












  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Influence Technology",
      "url" : "http://localhost:4000/ivx-js",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="http://localhost:4000/ivx-js/feed.xml" type="application/atom+xml" rel="alternate" title="iVXjs Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/ivx-js/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/ivx-js/">iVXjs</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/ivx-js/developer/tutorial.hello-world">Getting Started</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/ivx-js/developer/tutorials">Tutorials</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/ivx-js/developer/configuration">Configuration and Features</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Set Up a 404 State">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Set Up a 404 State
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <h1 id="set-up-a-404-state">Set Up a 404 State</h1>

<aside class="sidebar__right">
<nav class="toc">
    <header><h4 class="nav__title"><i class="fa fa-file-text"></i> On This Page</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#set-up-a-404-state" id="markdown-toc-set-up-a-404-state">Set Up a 404 State</a>    <ul>
      <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
      <li><a href="#demo" id="markdown-toc-demo">Demo</a></li>
      <li><a href="#setting-up-the-page-not-found-state" id="markdown-toc-setting-up-the-page-not-found-state">Setting up the Page Not Found State</a>        <ul>
          <li><a href="#sample-data" id="markdown-toc-sample-data">Sample Data</a></li>
          <li><a href="#adding-a-page-not-found-to-an-existing-experience" id="markdown-toc-adding-a-page-not-found-to-an-existing-experience">Adding a Page Not Found to an existing experience</a></li>
        </ul>
      </li>
      <li><a href="#notes-about-page-not-found-states" id="markdown-toc-notes-about-page-not-found-states">Notes about Page Not Found States</a></li>
    </ul>
  </li>
</ul>

  </nav>
</aside>

<h2 id="overview">Overview</h2>

<p>By default, an iVXjs experience will navigate to the default state if an url doesn’t match any 
of the states url. This might be good for most cases, but sometimes as a developer, you would 
want to navigate to a state indicating the user has led to an invalid state and recover 
more elegantly. This tutorial will show you how to set up that state and navigate to it.</p>

<h2 id="demo">Demo</h2>

<p><a href="https://github.com/influencetech/ivx-js/tree/master/demos/set-up-a-404-state">Set Up A 404 State Demo</a></p>

<h2 id="setting-up-the-page-not-found-state">Setting up the Page Not Found State</h2>

<h3 id="sample-data">Sample Data</h3>

<p>The finished data for this tutorial can be found here: <a href="https://influencetech.github.io/ivx-js/developer/sample-JSON/404-page-sample.json">404-page-sample.json</a></p>

<h3 id="adding-a-page-not-found-to-an-existing-experience">Adding a Page Not Found to an existing experience</h3>

<p>Let’s take a simple experience and add a Page Not Found (404) state.</p>

<p>Here is our sample experience JSON:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "defaultState": [{
        "stateId": "valid-state"
    }],
    "states": [{
        "id": "valid-state-test",
        "name": "Valid State",
        "url": "/a-valid-state",
        "type": "html",
        "html" : "&lt;h1&gt;I am the default state!&lt;/h1&gt;&lt;h2&gt;I am also a valid part of the experience&lt;/h2&gt;"
    }]
}
</code></pre></div></div>

<p>If we loaded the experience in a browser it will look something like this:</p>

<p><img src="http://e8ddcf8725663d605209-8d8cc7c733bcfce1ecd11bbb8349e503.r95.cf2.rackcdn.com/tutorial/Valid-State.png" alt="Valid State" /></p>

<p>Now, let’s write give it an invalid url:</p>

<p><img src="http://e8ddcf8725663d605209-8d8cc7c733bcfce1ecd11bbb8349e503.r95.cf2.rackcdn.com/tutorial/invalid-url.png" alt="Invalid State Url" /></p>

<p>If we navigated to the url, we will always be redirectied to the “Valid State”. To change this behavior we will need to do a few things:</p>

<ul>
  <li>Add a new array of rules to the root of the JSON called “pageNotFoundStates”</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{

    "defaultState": [{
        "stateId": "valid-state"
    }],
    "pageNotFoundState" : [],
    "states": [{
         "id": "valid-state",
        "name": "Valid State",
        "url": "/a-valid-state",
        "type": "html",
        "html" : "&lt;h1&gt;I am the default state!&lt;/h1&gt;&lt;h2&gt;I am also a valid part of the experience&lt;/h2&gt;"
    }]
}
</code></pre></div></div>

<ul>
  <li>Add a rule object the <code class="highlighter-rouge">pageNotFoundStates</code> array with the <code class="highlighter-rouge">stateId</code> you wish it to redirect to.</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{

    "defaultState": [{
        "stateId": "valid-state"
    }],
    "pageNotFoundState" : [{
        "stateId" : "404-state"
    }],
    "states": [{
        "id": "valid-state",
        "name": "Valid State",
        "url": "/a-valid-state",
        "type": "html",
        "html" : "&lt;h1&gt;I am the default state!&lt;/h1&gt;&lt;h2&gt;I am also a valid part of the experience&lt;/h2&gt;"
    }]
}
</code></pre></div></div>

<ul>
  <li>Add the settings for the “404-state” to the states array</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{

    "defaultState": [{
        "stateId": "valid-state"
    }],
    "pageNotFoundState" : [{
        "stateId" : "404-state"
    }],
    "states": [{
        "id": "valid-state",
        "name": "Valid State",
        "url": "/a-valid-state",
        "type": "html",
        "html" : "&lt;h1&gt;I am the default state!&lt;/h1&gt;&lt;h2&gt;I am also a valid part of the experience&lt;/h2&gt;"
    },{
        "id": "404-state",
        "name": "404 Page",
        "url": "/404",
        "type": "html",
        "html" : "&lt;h1&gt; I am a page not found state.&lt;/h1&gt;"
    }]
}
</code></pre></div></div>

<p>After adding all the settings to your JSON then reload the page. You will see that when you type an invalid url, you will be redirected 
to the “404-state”:</p>

<p><img src="http://e8ddcf8725663d605209-8d8cc7c733bcfce1ecd11bbb8349e503.r95.cf2.rackcdn.com/tutorial/invalid-url.png" alt="Invalid State Url" /></p>

<p><img src="http://e8ddcf8725663d605209-8d8cc7c733bcfce1ecd11bbb8349e503.r95.cf2.rackcdn.com/tutorial/page-not-found-state-2.png" alt="Page Not Found State" /></p>

<h2 id="notes-about-page-not-found-states">Notes about Page Not Found States</h2>

<p>Since the page not found feature uses rules, you can have multiple page not found states depending on the data in the 
experience.</p>

<p>Also, if you don’t have any page not found states set up, then it will default to the defaultState rules.</p>

<p>If you navigate to the experience the first time, it will always go to the default state first. It is only when 
an invalid url is given that it will redirect to the the page not found state.</p>

        
      </section>

      <footer class="page__meta">
        
        




        
      </footer>

      

      


    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
    
    <li><a href="http://localhost:4000/ivx-js/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Influence Technology. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="http://localhost:4000/ivx-js/assets/js/main.min.js"></script>





  </body>
</html>

