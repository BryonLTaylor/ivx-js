(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,o)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(o)},_audio=require("./audio.js"),_audio2=_interopRequireDefault(_audio),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r={ADD_PLAYING_CLASS:"add-playing-class",BUFFERING:"buffering",CAN_PLAY:"can-play",DISPOSE:"dispose",ENDED:"ended",GET_DURATION:"get-duration",MUTE:"mute",PAUSE:"pause",PAUSED:"paused",PLAY:"play",PLAYING:"playing",SEEK:"seek",SET_UP:"set-up",SET_DURATION:"set-duration",SET_VOLUME:"set-volume",TIME_UPDATE:"time-update",UNMUTE:"unmute"};return e.addNames(r),e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(e){var r=this.DELIMETER;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+r+e}}]),t}(_audio2.default);exports.default=_class;

},{"./audio.js":2}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},_index=require("./index.js"),_index2=_interopRequireDefault(_index),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.AUDIO="audio",e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(){var e=this.DELIMETER,r=this.AUDIO;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+e+r}}]),t}(_index2.default);exports.default=_class;

},{"./index.js":8}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},_firebase=require("./firebase.js"),_firebase2=_interopRequireDefault(_firebase),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.AUTHENTICATION="auth";var r={REQUEST_PASSWORD:"request-password",GET_PASSWORD:"get-password",ACCOUNT_EXISTS:"account-exists-with-different-credential"};return e.addNames(r),e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(e){var r=this.DELIMETER,o=this.AUTHENTICATION;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+r+o+r+e}}]),t}(_firebase2.default);exports.default=_class;

},{"./firebase.js":5}],4:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},_firebase=require("./firebase.js"),_firebase2=_interopRequireDefault(_firebase),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r={CREATE_EXPERIENCE:"create-experience"};return e.addNames(r),e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(e){var r=this.DELIMETER;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+r+e}}]),t}(_firebase2.default);exports.default=_class;

},{"./firebase.js":5}],5:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},_index=require("./index.js"),_index2=_interopRequireDefault(_index),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.FIREBASE="firebase",e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(){var e=this.DELIMETER,r=this.FIREBASE;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+e+r}}]),t}(_index2.default);exports.default=_class;

},{"./index.js":8}],6:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},_iVXjsConfig=require("./iVXjs.config.js"),_iVXjsConfig2=_interopRequireDefault(_iVXjsConfig),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r={VALIDATED:"validated",NOT_VALID:"not-valid",ANALYTICS_SET:"analytics-set",ANALYTICS_FINISHED:"analytics-finished"};return e.addNames(r),e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(e){var r=this.DELIMETER;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+r+e}}]),t}(_iVXjsConfig2.default);exports.default=_class;

},{"./iVXjs.config.js":7}],7:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},_index=require("./index.js"),_index2=_interopRequireDefault(_index),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.CONFIG="config",e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(){var e=this.DELIMETER,r=this.CONFIG;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+e+r}}]),t}(_index2.default);exports.default=_class;

},{"./index.js":8}],8:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),_class=function(){function e(){_classCallCheck(this,e),this.LIBRARY="iVXjs",this.DELIMETER=":"}return _createClass(e,[{key:"convention",value:function(){return this.LIBRARY}},{key:"addNames",value:function(e){var n=this,t=Object.keys(e);t.forEach(function(t,a){n[t]=n.convention(e[t])})}}]),e}();exports.default=_class;

},{}],9:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_get=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var u=Object.getPrototypeOf(t);return null===u?void 0:e(u,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},_state=require("./state.js"),_state2=_interopRequireDefault(_state),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r={CHANGE:"change",SUCCESS:"success",ERROR:"error",GO:"go",NOT_FOUND:"not-found",GET_STATE:"get-state",REQUEST_STATE:"request-state"};return e.addNames(r),e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(e){var r=this.DELIMETER;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+r+e}}]),t}(_state2.default);exports.default=_class;

},{"./state.js":10}],10:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},_index=require("./index.js"),_index2=_interopRequireDefault(_index),_class=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.STATE="state",e}return _inherits(t,e),_createClass(t,[{key:"convention",value:function(){var e=this.DELIMETER,r=this.STATE;return""+_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convention",this).call(this)+e+r}}]),t}(_index2.default);exports.default=_class;

},{"./index.js":8}],11:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),_firebaseAuthentication=require("../../../constants/firebase.authentication.js"),_firebaseAuthentication2=_interopRequireDefault(_firebaseAuthentication),_firebaseEvents=require("../../../constants/firebase.events.js"),_firebaseEvents2=_interopRequireDefault(_firebaseEvents),_typeParsers=require("../../../utilities/type-parsers.js"),_stateEvents=require("../../../constants/state.events.js"),_stateEvents2=_interopRequireDefault(_stateEvents),_utilities=require("./utilities.js"),_utilities2=_interopRequireDefault(_utilities),objectParser=new _typeParsers.ObjectParsers,typeValidator=new _typeParsers.TypeValidator,utilities=new _utilities2.default,_class=function(){function e(t){_classCallCheck(this,e),this.iVXjsLog=t,this.authConstants=new _firebaseAuthentication2.default,this.stateEventNames=new _stateEvents2.default,this.eventConstants=new _firebaseEvents2.default}return _createClass(e,[{key:"getExternalTemplates",value:function(e){if(!this.localTemplates&&e){var t=firebase.storage(),i=t.ref(e);return i.getDownloadURL()}}},{key:"uploadFile",value:function(e){var t=firebase.auth().currentUser,i=e.name;if(t){var s=t.uid,a=firebase.storage().ref("/"+s+"/"+i),n=a.put(e);return n}}},{key:"createExperience",value:function(e){var t=e.data,i=void 0===t?{}:t,s=this.experiencePath,a=this.data,n=this.src,r=firebase.database(),u=this,o=new Promise(function(e,t){u.Bus.once(u.stateEventNames.GET_STATE,function(t){i.src=n,i.stateSrc=t.data.id;var o=(t.data,utilities.detokenize(s,u.user,u,u.iVXjsLog),firebase.auth()),h=o.currentUser;h&&(i.user={},i.user[h.uid]=!0);var c=r.ref(utilities.detokenize(s,u.user,u,u.iVXjsLog)).push(i).key,l=new _firebaseEvents2.default;u.key=c,u.data=i,h?!function(){var t=h.uid;r.ref("users/"+t).once("value").then(function(i){var s=i.val(),a=s.experiences;if(a)a[c]=!0,r.ref("users/"+t).update({experiences:a}),u.Bus.emit(l.CREATE_EXPERIENCE,i,c,h),e(c,h);else{var n={};n[c]=!0,r.ref("users/"+t).update({experiences:n})}})}():(u.Bus.emit(l.CREATE_EXPERIENCE,a,c),e(c))}),u.Bus.emit(u.stateEventNames.REQUEST_STATE)});return o}},{key:"isRestricted",value:function(){return new Promise(function(e,t){firebase.auth().onAuthStateChanged(function(t){e(!t)})})}},{key:"signOutUser",value:function(){var e=firebase.auth();return e.signOut()}},{key:"signInWithGithub",value:function(e,t){var i=this,s=new firebase.auth.GithubAuthProvider;this.key,firebase.auth();this.Bus.once(this.stateEventNames.GET_STATE,function(e){var t=e.data;i.handleRedirect(t,s)}),this.Bus.emit(this.stateEventNames.REQUEST_STATE)}},{key:"signInAnonymously",value:function(e,t){var i=(this.key,firebase.auth());i.signInAnonymously().catch(function(e){})}},{key:"handleRedirect",value:function(e,t,i){var s=i.scope,a=void 0===s?[]:s;a.forEach(function(e,i){t.addScope&&t.addScope(e)}),e.key=this.key,localStorage&&(localStorage.redirectOrigin=JSON.stringify(e)),firebase.auth().signInWithRedirect(t)}},{key:"signInWithGoogle",value:function(e,t){var i=this,s=this.key,a=new firebase.auth.GoogleAuthProvider,n={};n[s]=!0,this.Bus.once(this.stateEventNames.GET_STATE,function(t){var s=t.data;i.handleRedirect(s,a,e)}),this.Bus.emit(this.stateEventNames.REQUEST_STATE)}},{key:"signInWithTwitter",value:function(e,t){var i=this,s=new firebase.auth.TwitterAuthProvider;this.key;this.Bus.once(this.stateEventNames.GET_STATE,function(e){var t=e.data;i.handleRedirect(t,s)}),this.Bus.emit(this.stateEventNames.REQUEST_STATE)}},{key:"signInWithFacebook",value:function(e,t){var i=this,s=new firebase.auth.FacebookAuthProvider;this.key;this.Bus.once(this.stateEventNames.GET_STATE,function(e){var t=e.data;i.handleRedirect(t,s)}),this.Bus.emit(this.stateEventNames.REQUEST_STATE)}},{key:"setUpUsers",value:function(e,t,i){firebase.database().ref("users/"+e.uid).update({email:e.email}),firebase.database().ref("users/"+e.uid+"/experiences/"+t).set(!0),i(e)}},{key:"signInWithEmail",value:function(e,t){function i(i){var n=e.emailKey,r=s.data,u=r[n];firebase.auth().createUserWithEmailAndPassword(u,i).then(function(e){s.setUpUsers(e,a,t)}).catch(function(e){e.code,e.message;console.log(e.code)})}var s=this,a=this.key;this.Bus.once(this.authConstants.GET_PASSWORD,i),this.Bus.emit(this.authConstants.REQUEST_PASSWORD)}},{key:"signInUser",value:function(e,t,i){switch(e){case"google":return void this.signInWithGoogle(t,i);case"email":return void this.signInWithEmail(t,i);case"facebook":return void this.signInWithFacebook(t,i);case"twitter":return void this.signInWithTwitter(t,i);case"github":return void this.signInWithGithub(t,i);case"anonymous":this.signInAnonymously(t,i)}i()}},{key:"authorizeUser",value:function(e){var t=e.authType,i=this,s=i.key,a=new Promise(function(a,n){firebase.auth().onAuthStateChanged(function(n){if(n){var r=n.uid,u=n.email,o=void 0===u?"":u,h=n.displayName;firebase.database().ref("users/"+n.uid).update({email:n.email}),s&&firebase.database().ref("users/"+n.uid+"/experiences/"+s).set(!0),i.data.user={uid:r,email:o,displayName:h},a(n)}else i.signInUser(t,e,a)})});return a}},{key:"setData",value:function(e){var t=this,i=firebase.database(),s=(t.data,t.key),a=(t.auth,t.iVXjsLog),n=t.experiencePath,r=e.key,u=e.value,o=e.ref,h=e.user,c=void 0!==h&&h,l={},f=firebase.auth().currentUser,d=utilities.detokenize(n+"/$x.key",t.user,t,a);if(o||s||c){if(!f&&c)return void a.warn("Authorization Required. Key: "+r+" Value: "+u+" was not saved to the Firebase Database.");if(l[r]=u,f&&c){var v=f.uid;return i.ref("users/"+v).update(l).then(function(){t.user[r]=u})}if(o){var E=utilities.detokenize(o,t.user,t,a);if(E)return i.ref(E).update(l).then(function(){})}return d?i.ref(d).update(l).then(function(){t.data[r]=u}):new Promise(function(e,t){e()})}}},{key:"experienceActions",get:function(){return{authorizeUser:this.authorizeUser,eventListeners:this.eventListeners,signInUser:this.signInUser,signOutUser:this.signOutUser,signInWithGoogle:this.signInWithGoogle,signInWithFacebook:this.signInWithFacebook,signInWithTwitter:this.signInWithTwitter,signInWithEmail:this.signInWithEmail,signInWithGithub:this.signInWithGithub,signInAnonymously:this.signInAnonymously,handleRedirect:this.handleRedirect,setUpUsers:this.setUpUsers,setData:this.setData,authConstants:this.authConstants,stateEventNames:this.stateEventNames,uploadFile:this.uploadFile,isRestricted:this.isRestricted,addEventListeners:this.addEventListners,createExperience:this.createExperience,getExternalTemplates:this.getExternalTemplates}}}]),e}();exports.default=_class;

},{"../../../constants/firebase.authentication.js":3,"../../../constants/firebase.events.js":4,"../../../constants/state.events.js":9,"../../../utilities/type-parsers.js":18,"./utilities.js":14}],12:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function initializeFirebase(e){return e.module=FirebaseData,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.FirebaseData=void 0;var _createClass=function(){function e(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(i,t,a){return t&&e(i.prototype,t),a&&e(i,a),i}}(),_typeParsers=require("../../../utilities/type-parsers.js"),_iVXjsConfigEvents=require("../../../constants/iVXjs.config.events.js"),_iVXjsConfigEvents2=_interopRequireDefault(_iVXjsConfigEvents),_stateEvents=require("../../../constants/state.events.js"),_stateEvents2=_interopRequireDefault(_stateEvents),_firebaseAuthentication=require("../../../constants/firebase.authentication.js"),_firebaseAuthentication2=_interopRequireDefault(_firebaseAuthentication),_actions=require("../ivx-js/actions.js"),_rules=require("./rules.js"),_utilities=require("./utilities.js"),_utilities2=_interopRequireDefault(_utilities),_actions2=require("./actions.js"),_actions3=_interopRequireDefault(_actions2),defaultActions=new _actions.Actions,myObjectParser=new _typeParsers.ObjectParsers,utilities=new _utilities2.default,FirebaseData=exports.FirebaseData=function(){function e(){var i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),t=arguments[2],a=arguments[3];_classCallCheck(this,e);var s=i.data,n=i.experience,r=(n.data,s.apiKey),u=s.authDomain,o=s.databaseURL,l=s.storageBucket,c=s.auth,f=void 0!==c&&c,d=s.createExperienceOnLoad,v=void 0===d||d,h=s.experiencePath,p=void 0===h?"experiences":h,_=s.localTemplates,b=void 0!==_&&_,g=s.templateRef;this.iVXjsSettings=i,this.Bus=t,this.iVXjsLog=a;var m={apiKey:r,authDomain:u,databaseURL:o,storageBucket:l};firebase.initializeApp(m),this.auth=f,this.databaseURL=o,this.firebaseConstants=new _firebaseAuthentication2.default,this.createExperienceOnLoad=v,this.experiencePath=p,this.localTemplates=b,this.defaultExperience=n,this.templateRef=g}return _createClass(e,[{key:"setUpExperience",value:function(e,i,t){function a(e){firebase.auth().getRedirectResult().then(function(i){var t=i.user;if(!l)return void s(e);if(t&&localStorage){var a=localStorage,u=a.redirectOrigin,o=JSON.parse(u),c=i.user;i.crediential;n(c,o,e)}else r(e)}).catch(function(e){_.Bus.emit(h.ACCOUNT_EXISTS,e),console.dir(e);var i={message:"Firebase couldn't authenticate with email, "+e.email+", due to error code "+e.code+". \n            You can handle this error by listening for event: "+h.ACCOUNT_EXISTS+".",type:"FIREBASE:AUTHENTICATION"};p.error(i,"Firebase")})}function s(e){var a=firebase.auth().currentUser;y.src=i,y.user=a,y.iVXjsLog=_.iVXjsLog;var s={config:e,experience:R,rules:new _rules.Rules(y,x).rules};t(s)}function n(e,i,a){var s=i.key,n=i.next;y.key=s,y.user=e,y.iVXjsLog=_.iVXjsLog,_.Bus.once((new _iVXjsConfigEvents2.default).VALIDATED,function(e){e.experience.goToNextState({next:n})});var r={config:a,experience:R,rules:new _rules.Rules(y,x).rules};b.ref("users/"+e.uid).once("value").then(function(i){if(null===i.val()){var a={};a[e.uid]={email:e.email},b.ref("users").set(a).then(function(i){u(e,s,t,r)})}else{var n=i.val();n.uid=e.uid,u(n,s,t,r)}})}function r(e){var a=firebase.auth().currentUser,s={src:i},n=utilities.detokenize(f,a,c),r=void 0;a&&(s.user={},s.user[a.uid]=!0,y.user=a),n&&(r=firebase.database().ref(n).push(s).key),y.key=r,y.auth=o,y.src=i,y.iVXjsLog=_.iVXjsLog;var l={config:e,experience:R,rules:new _rules.Rules(y,x).rules};return a&&n?(y.user=a,void b.ref("users/"+a.uid).once("value").then(function(e){if(null===e.val())!function(){var e={},i={email:a.email,name:a.displayName,photoURL:a.photoURL,uid:a.uid};e[a.uid]=i,b.ref("users").set(e).then(function(e){u(i,r,t,l)})}();else{var i=e.val(),s=i.uid,n=void 0===s?a.uid:s,o=i.email,c=void 0===o?a.email:o,f=i.name,d=void 0===f?a.displayName:f,v=i.avatar,h=void 0===v?a.photoURL:v,p=i.experiences,_=void 0===p?{}:p,g={uid:n,email:c,name:d,avatar:h,experiences:_};u(g,r,t,l)}})):void t(l)}function u(e,i,t,a){var s=e.experiences,n=void 0===s?{}:s,r=e.uid;delete e.uid,n[i]=!0,e.experiences=n,b.ref("users/"+r).update(e),t(a)}var o=this.auth,l=this.createExperienceOnLoad,c=this.defaultExperience,f=this.experiencePath,d=this.localTemplates,v=this.templateRef,h=this.firebaseConstants,p=this.iVXjsLog,_=this,b=firebase.database(),g=this.iVXjsSettings,m=g.experience,j=void 0===m?{}:m,x=g.rules,y=(g.ui,g.validation,myObjectParser.merge(new _actions.Actions,j)),R=myObjectParser.merge(y,new _actions3.default(this.iVXjsLog).experienceActions);y.experiencePath=f,d?a(e):utilities.addRemoteTemplates(e,v).then(function(e){a(e)})}},{key:"enhance",value:function(){var e=this,i=(e.auth,e.iVXjsSettings),t=(e.databaseURL,i.config),a=firebase.database(),s=new Promise(function(i,s){a.ref(t).once("value").then(function(a){e.setUpExperience(a.val(),t,i)})});return s}}]),e}();module.export=initializeFirebase,angular&&angular.module("ivx-js")&&angular.module("ivx-js").constant("iVXjs.data.firebase",initializeFirebase).provider("iVXjsFirebaseUtilities",function(){this.utilities=new _utilities2.default,this.$get=function(){}});

},{"../../../constants/firebase.authentication.js":3,"../../../constants/iVXjs.config.events.js":6,"../../../constants/state.events.js":9,"../../../utilities/type-parsers.js":18,"../ivx-js/actions.js":15,"./actions.js":11,"./rules.js":13,"./utilities.js":14}],13:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rules=void 0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_rules=require("../ivx-js/rules.js"),Rules=exports.Rules=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.experience=e,n.customRules=r,n}return _inherits(t,e),_createClass(t,[{key:"processRules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this,r=e.find(function(e){var r=e.rule&&e.rule.key&&"auth"===e.rule.key;return r?firebase.auth().currentUser:t.evaluateRules(e)});return r?r:""}},{key:"rules",get:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=e.customRules(t);if(r)return r;var n=e.processRules(t).stateId;e.experience.config.states.find(function(e,t){return n===e.id});return n}}}]),t}(_rules.Rules);

},{"../ivx-js/rules.js":17}],14:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_typeParsers=require("../../../utilities/type-parsers.js"),objectParser=new _typeParsers.ObjectParsers,typeValidator=new _typeParsers.TypeValidator,_class=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addRemoteTemplates",value:function(e,t){function a(e,t,a,r,n){var l=e.path,o=e.templateKey,s=(e.keys,objectParser.getValueFromPath(l,t));if(!typeValidator.isEmpty(s)){s.map(function(e,t){var s=objectParser.getValueFromPath(o,e);s&&(a.push(i.child(s).getDownloadURL()),r.push(n+"."+l+"."+t+"."+o))})}}var r=this.templateLocations,n=JSON.parse(JSON.stringify(e)),l=n.states,o=firebase.storage(),i=o.ref("/"),s=new Promise(function(e,t){var o=[],s=[];l.forEach(function(e,t){var n=e.type,l=r[n];l.forEach(function(r,n){if(typeValidator.isString(r)){var l=objectParser.getValueFromPath(r,e);l&&(o.push(i.child(l).getDownloadURL()),s.push("states."+t+"."+r))}else!function(){var n=r.path,l=r.keys,i=void 0===l?[]:l,u=e[n];a(r,e,o,s,"states."+t),i.forEach(function(e,r){Array.isArray(u)&&u.forEach(function(l,i){a(e,l,o,s,"states."+t+"."+n+"."+r)})})}()})}),Promise.all(o).then(function(t){n.templates=t,$.support.cors=!0,$.get(t[0]).then(function(e){console.log(e)}),e(n)},function(e){console.dir(e),t(e)})});return s}},{key:"detokenize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console,n=(a.data,a.key),l=null==t?{}:t,o=l.uid,i=e.replace(/\$uid/g,function(e){return o?o:e}).replace(/\$x.key/g,function(e){return n?n:e}).replace(/\$x.data.[a-z,A-Z,0-9]*/g,function(e){var t=objectParser.getValueFromPath(e,a),n=typeValidator.isString(t)||typeValidator.isBoolean(t)||typeValidator.isNumber(t);return n?t:(r.warn(e+" is invalid. Make sure this value is a String, Boolean, or Number."),e)}),s=i.indexOf("$uid")>=0,u=i.indexOf("$x.key")>=0,p=i.indexOf("$x.data")>=0,c=s||u||p;return s&&r.warn("This link can't be detokenized because this path because there is no Authorized User."),u&&r.warn("This link can't be detokenized because this path because there is no active experience."),c?!c:i}},{key:"templateLocations",get:function(){return{input:["header.templateUrl","footer.templateUrl","form.labelTemplateUrl","form.submit.labelTemplateUrl",{path:"inputs",templateKey:"labelTemplateUrl",keys:[{path:"buttons",templateKey:"labelTemplateUrl"},{path:"radioButtons",templateKey:"labelTemplateUrl"}]}],navigation:["header.templateUrl","footer.templateUrl",{path:"links",templateKey:"labelTemplateUrl"}],html:["templateUrl"],video:["header.templateUrl","footer.templateUrl",{path:"personalizations",templateKey:"templateUrl"}]}}}]),e}();exports.default=_class;

},{"../../../utilities/type-parsers.js":18}],15:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Actions=void 0;var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_audioEvents=require("../../../constants/audio.events.js"),_audioEvents2=_interopRequireDefault(_audioEvents),_stateEvents=require("../../../constants/state.events.js"),_stateEvents2=_interopRequireDefault(_stateEvents),Actions=exports.Actions=function(){function e(){_classCallCheck(this,e),this.data={},this.audioEventNames=new _audioEvents2.default,this.stateEventNames=new _stateEvents2.default}return _createClass(e,[{key:"setElementClasses",value:function(e,t){var n=t.animationClasses,a=void 0===n?"":n,s=e.animationClass;if(!(e.className.indexOf(a)>=0))return e.className.indexOf("hide")>=0?void(e.className=e.className.replace("hide",a)):(s&&(e.className=e.className.replace(s,"")),e.animationClass=a,e.className=e.className+" "+a,e)}},{key:"goToNextState",value:function(e){var t=this,n=e.next,a=this,s=this.rules(n),i=new Promise(function(e,n){s&&(t.Bus.emit(a.stateEventNames.GO,{stateId:s}),e())});return i}},{key:"animateElement",value:function(e){var t=this,n=e.element,a=document.querySelectorAll(n);if(a&&!(a.length<=0)){a=Array.from(a),a.forEach(function(n,a){n=t.setElementClasses(n,e)});var s=new Promise(function(t,n){function s(n){a.forEach(function(t,n){i.forEach(function(n){t.animationClass=e.animationClasses,t.removeEventListener(n,s)})}),t()}var i=["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","osanimationend","animationend"];i.forEach(function(e){a.forEach(function(t,n){t.addEventListener(e,s)})})});return s}}},{key:"goToState",value:function(e,t){e.state;t&&t.emit(this.stateEventNames.GO,e)}},{key:"playAudioClip",value:function(e){var t=this.audioEventNames,n=this;e&&(this.Bus.emit(t.SET_UP,e),this.Bus.emit(t.PLAY)),this.Bus.on(t.TIME_UPDATE,function(t){t.id===e.id&&t.runCuePoints(n.processor)});var a=new Promise(function(a,s){n.Bus.once(t.ENDED,function(t){t.id===e.id&&n.processor.resolveActions(e.onEnd,function(){a()})})});return a}},{key:"setData",value:function(e){var t=e.key,n=e.value,a=this,s=new Promise(function(e,s){a.data[t]=n,e(a)});return s}}]),e}();

},{"../../../constants/audio.events.js":1,"../../../constants/state.events.js":9}],16:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_typeParsers=require("../../../utilities/type-parsers.js"),typeValidator=new _typeParsers.TypeValidator,_class=function(){function e(n,t){_classCallCheck(this,e),this.experience=n,this.customEvaluator=t}return _createClass(e,[{key:"evaluate",value:function(e){var n=this,t=e.conditionOperator,r=void 0===t?"and":t,u=e.conditions,a=u.map(function(e,t){var r=e.key,u=e.is,a=e.value,i=e.type,o=void 0===i?"input":i;return n.customEvaluator&&typeValidator.isFunction(n.customEvaluator)&&n.customEvaluator(e)?n.customEvaluator(e):n[r]?n[r](r,u,a):n[o](r,u,a)});return this[r](a)}},{key:"input",value:function(e,n,t){var r=this.experience,u=r.data[e];return this[n](u,t)}},{key:"and",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,n,t){return e&&n},!0)}},{key:"or",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,n,t){return e||n},!1)}},{key:"not",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,n,t){return e&&!n},!0)}},{key:"lte",value:function(e,n){return!isNaN(e)&&!isNaN(n)&&new Number(e)<=new Number(n)}},{key:"lt",value:function(e,n){return!isNaN(e)&&!isNaN(n)&&new Number(e)<new Number(n)}},{key:"gte",value:function(e,n){return!isNaN(e)&&!isNaN(n)&&new Number(e)>=new Number(n)}},{key:"gt",value:function(e,n){return!isNaN(e)&&!isNaN(n)&&new Number(e)>new Number(n)}},{key:"equals",value:function(e,n){return e===n}},{key:"notEquals",value:function(e,n){return e!==n}},{key:"in",value:function(e,n){return n.indexOf(e)>=0}}]),e}();exports.default=_class;

},{"../../../utilities/type-parsers.js":18}],17:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rules=void 0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,t,a){return t&&e(r.prototype,t),a&&e(r,a),r}}(),_evaluator=require("./evaluator.js"),_evaluator2=_interopRequireDefault(_evaluator),_typeParsers=require("../../../utilities/type-parsers.js"),typeValidator=new _typeParsers.TypeValidator,Rules=exports.Rules=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{}},t=arguments[1];_classCallCheck(this,e),this.experience=r,this.evaluator=new _evaluator2.default(r,t)}return _createClass(e,[{key:"processRules",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)||(e=[]);var r=this,t=e.find(function(e){var t=e.rule;if(typeValidator.isEmpty(t))return!0;var a=t.conditions,n=t.conditionOperator,o=void 0===n?"and":n;return a||(t.conditionOperator=o,t.conditions=[t]),r.evaluator.evaluate(t)});return t?t.stateId:""}},{key:"rules",get:function(){var e=this;return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.processRules(r)}}}]),e}();

},{"../../../utilities/type-parsers.js":18,"./evaluator.js":16}],18:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),TypeValidator=exports.TypeValidator=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isUndefined",value:function(e){return void 0===e||null===e}},{key:"isString",value:function(e){return"[object String]"===this.toString.call(e)}},{key:"isFunction",value:function(e){return e&&"[object Function]"===this.toString.call(e)}},{key:"isNumber",value:function(e){return!isNaN(e)}},{key:"isBoolean",value:function(e){return"boolean"==typeof e||"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"boolean"==typeof e.valueOf()}},{key:"isEmpty",value:function(e){var t=Object.prototype.hasOwnProperty,n=Array.isArray(e),r="string"==typeof e,o=n||r;if(o&&0===e.length)return!0;if(o&&e.length>0)return!1;if(!isNaN(e))return!1;if(void 0===e)return!0;if(null===e)return!0;for(var i in e)if(t.call(e,i))return!1;return!0}},{key:"toString",get:function(){return Object.prototype.toString}}]),e}(),typeValidator=new TypeValidator,ObjectParsers=exports.ObjectParsers=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"mapKeys",value:function(e,t){if(!e||e==={})return[];var n=Object.keys(e),r=n.reduce(function(t,n){var r=[n,e[n]];return t.push(r),t},[]),o=new Map(r),i=[];return o?(o.forEach(function(e,n){i.push(t(e,n))}),i):[]}},{key:"merge",value:function(e,t,n){var r=Object.keys(t),o=new Object(e);return r.forEach(function(e,r){n&&n.indexOf(e)>=0||(o[e]=t[e])}),o}},{key:"reduce",value:function(e,t,n){if(e&&e!=={}){var r=Object.keys(e),o=r.reduce(function(t,n){var r=[n,e[n]];return t.push(r),t},[]),i=new Map(o);return i.forEach(function(e,r){n=t(n,e,r)}),n}}},{key:"anyEmpty",value:function(e,t){var n={isEmpty:!1,errors:[]};return e.forEach(function(e,r){t.forEach(function(t){typeValidator.isEmpty(e[t])&&(n.isEmpty=!0,n.errors.push({key:t,index:r,value:e[t]}))})}),n}},{key:"has",value:function(e,t){return Array.isArray(t)?this.hasSameArray(e,t):"object"===("undefined"==typeof t?"undefined":_typeof(t))?this.hasSameObject(e,t):e.indexOf(t)>=0}},{key:"hasSameObject",value:function(e,t){var n=!1;return e.forEach(function(e,r){if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var o=Object.keys(e);o.forEach(function(r,o){n=e[r]===t[r]})}}),n}},{key:"hasSameArray",value:function(e,t){var n=!1;return e.forEach(function(e,r){Array.isArray(e)&&e.forEach(function(e,r){n=e===t[r]})}),n}},{key:"setValue",value:function(e,t,n){for(var r=t.split("."),o=e,i=0;i<r.length-1;i++){var u=r[i];u in o?o=o[u]:(o[u]={},o=o[u])}o[r[r.length-1]]=n}},{key:"getValueFromPath",value:function(e,t){var n=e.split("."),r=t,o={},i=void 0;return n.forEach(function(e,t){if(!typeValidator.isEmpty(e)){if(o=r[e],typeValidator.isEmpty(o))return void(i=o);i=o,r=o}}),i}},{key:"isUnique",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={isUnique:!0,errors:[]},r={},o=this;return t.forEach(function(t){r[t]=[],e.forEach(function(e,i){var u=o.has(r[t],e[t]);u?(n.errors.push({key:t,index:i,value:e[t]}),n.isUnique=!1):r[t].push(e[t])})}),n}}]),e}();

},{}]},{},[12]);
